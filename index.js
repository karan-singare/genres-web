Object.defineProperty(exports,"__esModule",{value:true});var _jsxFileName="native.js";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require("react");var _react2=_interopRequireDefault(_react);var _reactNative=require("react-native");var _propTypes=require("prop-types");var _propTypes2=_interopRequireDefault(_propTypes);var _axios=require("axios");var _axios2=_interopRequireDefault(_axios);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var GenresPlugin=function(_Component){_inherits(GenresPlugin,_Component);function GenresPlugin(props){var _this2=this;_classCallCheck(this,GenresPlugin);var _this=_possibleConstructorReturn(this,(GenresPlugin.__proto__||Object.getPrototypeOf(GenresPlugin)).call(this,props));_this.componentDidMount=function _callee(){var genres;return regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return regeneratorRuntime.awrap(_this.getGenres());case 3:genres=_context.sent;_this.setState({genres:genres});_context.next=11;break;case 7:_context.prev=7;_context.t0=_context["catch"](0);console.log('error in componentDidMount in GenresPlugin');console.log(_context.t0);case 11:case"end":return _context.stop();}}},null,_this2,[[0,7]]);};_this.getGenres=function _callee2(){var _this$props,appId,appUrl,_ref,data;return regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_this$props=_this.props,appId=_this$props.appId,appUrl=_this$props.appUrl;_context2.next=4;return regeneratorRuntime.awrap(new GenresSDK(appId,appUrl).getGenres());case 4:_ref=_context2.sent;data=_ref.data;return _context2.abrupt("return",data);case 9:_context2.prev=9;_context2.t0=_context2["catch"](0);console.log('error while loading genres');console.log(_context2.t0);case 13:case"end":return _context2.stop();}}},null,_this2,[[0,9]]);};_this.appId=props.appId;_this.appUrl=props.appUrl;_this.state={genres:[]};return _this;}_createClass(GenresPlugin,[{key:"render",value:function render(){var _props=this.props,styles=_props.styles,onPress=_props.onPress;return _react2.default.createElement(_reactNative.View,{style:genreStyles.categoryContentStyle,__source:{fileName:_jsxFileName,lineNumber:29}},_react2.default.createElement(_reactNative.View,{style:[genreStyles.typesOfGenres],__source:{fileName:_jsxFileName,lineNumber:30}},this.state.genres.map(function(item){return _react2.default.createElement(_reactNative.Text,{key:item.name,onPress:onPress,style:[genreStyles.typesOfMoviesAndWebSeriesWrapStyle,styles&&styles,{color:'white',fontSize:15.0},{textTransform:"capitalize"}],__source:{fileName:_jsxFileName,lineNumber:32}},item.name);})));}}]);return GenresPlugin;}(_react.Component);exports.default=GenresPlugin;GenresPlugin.propTypes={visible:_propTypes2.default.bool.isRequired};var genreStyles=StyleSheet.create({categoryContentStyle:{borderRadius:7,paddingVertical:9,alignItems:'center',justifyContent:'space-around',paddingHorizontal:10,margin:10},typesOfGenres:{alignItems:'center',justifyContent:'center',width:300,flexDirection:'row',flexWrap:'wrap'},typesOfMoviesAndWebSeriesWrapStyle:{borderRadius:7,paddingVertical:6,paddingHorizontal:10,alignItems:'center',justifyContent:'center',margin:4}});var GenresSDK=function(_SDK){_inherits(GenresSDK,_SDK);function GenresSDK(appId,appUrl){var _this4=this;_classCallCheck(this,GenresSDK);var _this3=_possibleConstructorReturn(this,(GenresSDK.__proto__||Object.getPrototypeOf(GenresSDK)).call(this,appId,appUrl));_this3.getGenres=function _callee3(){return regeneratorRuntime.async(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.prev=1;_context3.next=4;return regeneratorRuntime.awrap(_this3.get('genres'));case 4:return _context3.abrupt("return",_context3.sent);case 7:_context3.prev=7;_context3.t0=_context3["catch"](1);console.error('error while getting genres');console.log(_context3.t0);case 11:_context3.next=17;break;case 13:_context3.prev=13;_context3.t1=_context3["catch"](0);console.log('error while loading genres');console.log(_context3.t1);case 17:case"end":return _context3.stop();}}},null,_this4,[[0,13],[1,7]]);};return _this3;}return GenresSDK;}(SDK);var SDK=function(){function SDK(appId,appUrl){_classCallCheck(this,SDK);this.headers={'Content-Type':'application/json'};this.appId=appId;this.baseApiUrl=this.getBaseApiUrl(appUrl);this.headers['x-consumer']='phone';this.headers['app-id']=this.appId;}_createClass(SDK,[{key:"send",value:function send(method,slug){var data=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var url,options;return regeneratorRuntime.async(function send$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;url=slug?this.baseApiUrl+slug:this.baseApiUrl;options={method:method,url:url,preambleCRLF:true,postambleCRLF:true,headers:this.headers};data?options['data']=data:'';_context4.next=6;return regeneratorRuntime.awrap((0,_axios2.default)(options));case 6:return _context4.abrupt("return",_context4.sent.data);case 9:_context4.prev=9;_context4.t0=_context4["catch"](0);console.log('error while sending request');console.log(_context4.t0);case 13:case"end":return _context4.stop();}}},null,this,[[0,9]]);}},{key:"get",value:function get(slug){return regeneratorRuntime.async(function get$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return regeneratorRuntime.awrap(this.send('get',slug));case 2:return _context5.abrupt("return",_context5.sent);case 3:case"end":return _context5.stop();}}},null,this);}},{key:"getAll",value:function getAll(slug){return regeneratorRuntime.async(function getAll$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return regeneratorRuntime.awrap(this.send('get',slug));case 2:return _context6.abrupt("return",_context6.sent);case 3:case"end":return _context6.stop();}}},null,this);}},{key:"post",value:function post(data,slug){return regeneratorRuntime.async(function post$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return regeneratorRuntime.awrap(this.send('post',slug,data));case 2:return _context7.abrupt("return",_context7.sent);case 3:case"end":return _context7.stop();}}},null,this);}},{key:"put",value:function put(data,slug){return regeneratorRuntime.async(function put$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return regeneratorRuntime.awrap(this.send('put',slug,data));case 2:return _context8.abrupt("return",_context8.sent);case 3:case"end":return _context8.stop();}}},null,this);}},{key:"delete",value:function _delete(slug){return regeneratorRuntime.async(function _delete$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return regeneratorRuntime.awrap(this.send('delete',slug));case 2:return _context9.abrupt("return",_context9.sent);case 3:case"end":return _context9.stop();}}},null,this);}},{key:"getBaseApiUrl",value:function getBaseApiUrl(appUrl){if(appUrl.includes('.dev.')){return'https://dev-apis.mogiio.com/';}if(appUrl.includes('.qa.')){return'https://qa-apis.mogiio.com/';}if(appUrl.includes('.stag.')){return'https://stag-apis.mogiio.com/';}return'https://apis.mogiio.com/';}}]);return SDK;}();
